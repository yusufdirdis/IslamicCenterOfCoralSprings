<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donate - Islamic Center of Coral Springs</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://js.stripe.com/v3/"></script>
</head>

<body>

    <nav class="navbar-one flex">
        <div class="left flex">
            <div class="email">
                <i class="fa fa-envelope"></i>
                <span> info@iccsfl.com</span>
            </div>
            <div class="call">
                <i class="fa fa-phone"></i>
                <span> (954) 529-7146</span>
            </div>
        </div>
        <div class="right flex">
            <i class="fab fa-facebook"></i>
            <a href="https://www.facebook.com/iccsfl" target="_blank">Facebook</a>
        </div>
    </nav>

    <nav class="navbar-two flex" id="main-nav">
        <div class="logo">
            <img src="logo.png" alt="ICCS Logo" class="logo-image">
            <p>Islamic Center of Coral Springs</p>
        </div>
        <button class="menu-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="primary-navigation">
            <i class="fa fa-bars"></i>
        </button>
        <ul class="flex nav-links" id="primary-navigation">
            <li><a href="#" onclick="window.location.href='text.html'">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="#">Contact</a></li>
            <li class="hide-desktop"><a href="#" onclick="window.location.href='donatepage.html'">Donate</a></li>
        </ul>
        <div class="donate-nav-button">
            <a href="#" onclick="window.location.href='donatepage.html'">Donate</a>
        </div>
    </nav>

    <!-- Donate page content -->
    <section class="text-section">
        <div class="hero-container">
            <div class="hero-welcome">DONATE TO</div>
            <hr class="hero-divider">
            <div class="hero-title">ISLAMIC CENTER OF CORAL SPRINGS</div>

            <div class="donation-section">
                <h2>Support ICCS</h2>
                <p class="donation-text">
                    ICCS has been serving the Muslim Community of Coral Springs and nearby cities since 2012.
                    We are now blessed with an incredible opportunity to expand our center by purchasing an additional
                    part of the building for $1.3 million. Alhamdulillah, we have already raised a significant portion
                    and only <strong>$700,000 remains to be collected by December.</strong>
                    We humbly ask you to become part of this historic milestone. Your contribution <strong>in any
                        amount</strong> will be a Sadaqa-e-Jariyah, bringing ongoing rewards and serving as a means to
                    your Jannah, In Sha Allah. Let us come together as a community to make this dream a reality.
                </p>

                <div class="donation-amounts">
                    <h3>Choose Donation Amount</h3>
                    <div class="amount-buttons">
                        <button class="amount-btn" data-amount="25">$25</button>
                        <button class="amount-btn" data-amount="50">$50</button>
                        <button class="amount-btn" data-amount="100">$100</button>
                        <button class="amount-btn" data-amount="250">$250</button>
                        <button class="amount-btn" data-amount="500">$500</button>
                        <button class="amount-btn" data-amount="1000">$1,000</button>
                    </div>
                    <div class="custom-amount">
                        <input type="number" id="custom-amount" placeholder="Enter custom amount" min="1">
                    </div>
                    <button id="checkout-button" class="donate-now-button" disabled>Donate Now</button>
                </div>
            </div>
        </div>

        <footer class="footer">
        <img src="logo.png" alt="ICCS Logo" class="footer-logo"> <p>11050 Wiles Rd, Coral Springs, FL 33076
        </p>
        <p>&copy; 2025 Islamic Center of Coral Springs. All rights reserved.</p>
      </footer>

    </section>

        <script>
  // Mobile nav toggle
  (function(){
    var nav = document.getElementById('main-nav');
    var toggle = document.querySelector('.menu-toggle');
    if (toggle && nav) {
      toggle.addEventListener('click', function(){
        var isOpen = nav.classList.toggle('is-open');
        toggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
      });
    }
  })();

  (function () {
    const amountBtns = document.querySelectorAll('.amount-btn');
    const customInput = document.getElementById('custom-amount');
    const donateBtn = document.getElementById('checkout-button');
    let selected = null;

    // Handle preset buttons
    amountBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        amountBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        selected = parseInt(btn.dataset.amount, 10);
        donateBtn.disabled = false;
      });
    });

    // Handle custom amount input
    if (customInput) {
      customInput.addEventListener('input', () => {
        const val = parseFloat(customInput.value);
        if (!isNaN(val) && val >= 1) {
          selected = val;
          donateBtn.disabled = false;
        } else {
          donateBtn.disabled = true;
        }
      });
    }

    // On donate click â†’ call server and redirect
    donateBtn.addEventListener('click', async () => {
      if (!selected) return;
      const cents = Math.round(selected * 100);
      try {
        const res = await fetch('/create-checkout-session', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ amount: cents })
        });
        const data = await res.json();
        if (data.url) {
          window.location = data.url; // Go to Stripe Checkout
        } else {
          alert(data.error || 'Failed to start checkout.');
        }
      } catch (e) {
        alert('Network error starting checkout.');
      }
    });
  })();
</script>

</body>

</html>